{"version":3,"sources":["../../../src/routes/items/relatedItems.elastic.js"],"sourcesContent":["function getRelatedItemsBody({ settings, size = 10, sources = [] }) {\n  if (sources.length === 0) {\n    throw new Error(\"[getRelatedItemsBody] sources should not be empty\");\n  }\n  return {\n    _source: [\n      \"title\",\n      \"source\",\n      \"slug\",\n      \"description\",\n      \"url\",\n      \"action\",\n      \"icon\",\n      \"cdtnId\",\n    ],\n    query: {\n      bool: {\n        filter: [\n          { term: { excludeFromSearch: false } },\n          { term: { isPublished: true } },\n          {\n            bool: {\n              should: sources.map((source) => ({ term: { source } })),\n            },\n          },\n        ],\n        must: {\n          more_like_this: {\n            fields: [\"title\", \"text\"],\n            like: settings,\n            max_query_terms: 12,\n            min_term_freq: 1,\n          },\n        },\n      },\n    },\n    size,\n  };\n}\n\nmodule.exports = getRelatedItemsBody;\n"],"names":["getRelatedItemsBody","settings","size","sources","length","Error","_source","query","bool","filter","term","excludeFromSearch","isPublished","should","map","source","must","more_like_this","fields","like","max_query_terms","min_term_freq","module","exports"],"mappings":"AAAA,SAASA,oBAAoB,EAAEC,SAAQ,EAAEC,MAAO,GAAE,EAAEC,SAAU,EAAE,CAAA,EAAE,EAAE;IAClE,IAAIA,QAAQC,MAAM,KAAK,GAAG;QACxB,MAAM,IAAIC,MAAM,qDAAqD;IACvE,CAAC;IACD,OAAO;QACLC,SAAS;YACP;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACDC,OAAO;YACLC,MAAM;gBACJC,QAAQ;oBACN;wBAAEC,MAAM;4BAAEC,mBAAmB,KAAK;wBAAC;oBAAE;oBACrC;wBAAED,MAAM;4BAAEE,aAAa,IAAI;wBAAC;oBAAE;oBAC9B;wBACEJ,MAAM;4BACJK,QAAQV,QAAQW,GAAG,CAAC,CAACC,SAAY,CAAA;oCAAEL,MAAM;wCAAEK;oCAAO;gCAAE,CAAA;wBACtD;oBACF;iBACD;gBACDC,MAAM;oBACJC,gBAAgB;wBACdC,QAAQ;4BAAC;4BAAS;yBAAO;wBACzBC,MAAMlB;wBACNmB,iBAAiB;wBACjBC,eAAe;oBACjB;gBACF;YACF;QACF;QACAnB;IACF;AACF;AAEAoB,OAAOC,OAAO,GAAGvB"}