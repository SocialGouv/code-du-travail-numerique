{"version":3,"sources":["../../../src/routes/__tests__/idcc.test.js"],"sourcesContent":["import router, { parseIdcc } from \"../idcc\";\n\nconst request = require(\"supertest\");\nconst Koa = require(\"koa\");\n\nconst app = new Koa();\napp.use(router.routes());\n\ntest(\"parse idcc\", () => {\n  expect(parseIdcc(\"aa\")).toBeUndefined();\n  expect(parseIdcc(\"123\")).toEqual(123);\n  expect(parseIdcc(\"0123\")).toEqual(123);\n});\n\ntest(\"return idcc results for boulangerie\", async () => {\n  const response = await request(app.callback()).get(\n    `/api/v1/idcc?q=boulangerie`\n  );\n  expect(response.status).toBe(200);\n  expect(response.body.hits).toMatchSnapshot();\n});\n\ntest(\"return idcc results for pati\", async () => {\n  const response = await request(app.callback()).get(`/api/v1/idcc?q=pati`);\n  expect(response.status).toBe(200);\n  expect(response.body.hits).toMatchSnapshot();\n});\n\ntest(\"return idcc results in correct order for banque\", async () => {\n  const response = await request(app.callback()).get(`/api/v1/idcc?q=banque`);\n  expect(response.status).toBe(200);\n  expect(response.body.hits).toMatchSnapshot();\n});\n\ntest(\"return idcc for number 27\", async () => {\n  const response = await request(app.callback()).get(`/api/v1/idcc?q=27`);\n  expect(response.status).toBe(200);\n  expect(response.body.hits).toMatchSnapshot();\n});\n"],"names":["router","parseIdcc","request","require","Koa","app","use","routes","test","expect","toBeUndefined","toEqual","response","callback","get","status","toBe","body","hits","toMatchSnapshot"],"mappings":"AAAA,OAAOA,UAAUC,SAAS,QAAQ,UAAU;AAE5C,MAAMC,UAAUC,QAAQ;AACxB,MAAMC,MAAMD,QAAQ;AAEpB,MAAME,MAAM,IAAID;AAChBC,IAAIC,GAAG,CAACN,OAAOO,MAAM;AAErBC,KAAK,cAAc,IAAM;IACvBC,OAAOR,UAAU,OAAOS,aAAa;IACrCD,OAAOR,UAAU,QAAQU,OAAO,CAAC;IACjCF,OAAOR,UAAU,SAASU,OAAO,CAAC;AACpC;AAEAH,KAAK,uCAAuC,UAAY;IACtD,MAAMI,WAAW,MAAMV,QAAQG,IAAIQ,QAAQ,IAAIC,GAAG,CAChD,CAAC,0BAA0B,CAAC;IAE9BL,OAAOG,SAASG,MAAM,EAAEC,IAAI,CAAC;IAC7BP,OAAOG,SAASK,IAAI,CAACC,IAAI,EAAEC,eAAe;AAC5C;AAEAX,KAAK,gCAAgC,UAAY;IAC/C,MAAMI,WAAW,MAAMV,QAAQG,IAAIQ,QAAQ,IAAIC,GAAG,CAAC,CAAC,mBAAmB,CAAC;IACxEL,OAAOG,SAASG,MAAM,EAAEC,IAAI,CAAC;IAC7BP,OAAOG,SAASK,IAAI,CAACC,IAAI,EAAEC,eAAe;AAC5C;AAEAX,KAAK,mDAAmD,UAAY;IAClE,MAAMI,WAAW,MAAMV,QAAQG,IAAIQ,QAAQ,IAAIC,GAAG,CAAC,CAAC,qBAAqB,CAAC;IAC1EL,OAAOG,SAASG,MAAM,EAAEC,IAAI,CAAC;IAC7BP,OAAOG,SAASK,IAAI,CAACC,IAAI,EAAEC,eAAe;AAC5C;AAEAX,KAAK,6BAA6B,UAAY;IAC5C,MAAMI,WAAW,MAAMV,QAAQG,IAAIQ,QAAQ,IAAIC,GAAG,CAAC,CAAC,iBAAiB,CAAC;IACtEL,OAAOG,SAASG,MAAM,EAAEC,IAAI,CAAC;IAC7BP,OAAOG,SAASK,IAAI,CAACC,IAAI,EAAEC,eAAe;AAC5C"}