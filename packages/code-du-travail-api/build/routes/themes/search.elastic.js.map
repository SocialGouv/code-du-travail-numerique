{"version":3,"sources":["../../../src/routes/themes/search.elastic.js"],"sourcesContent":["const { SOURCES } = require(\"@socialgouv/cdtn-sources\");\n\nfunction getRootThemesQuery() {\n  return {\n    _source: [\"icon\", \"children\", \"title\", \"slug\", \"position\"],\n    query: {\n      bool: {\n        filter: [\n          { term: { source: SOURCES.THEMES } },\n          { term: { isPublished: true } },\n        ],\n        must_not: { exists: { field: \"breadcrumbs\" } },\n      },\n    },\n    sort: [{ position: { order: \"asc\" } }],\n  };\n}\n\nfunction getThemeQuery({ slug }) {\n  return {\n    _source: [\n      \"title\",\n      \"slug\",\n      \"position\",\n      \"breadcrumbs\",\n      \"children\",\n      \"description\",\n      \"refs\",\n    ],\n    query: {\n      bool: {\n        filter: [\n          { term: { slug } },\n          { term: { isPublished: true } },\n          { term: { source: SOURCES.THEMES } },\n        ],\n      },\n    },\n    sort: [{ position: { order: \"asc\" } }],\n  };\n}\n\nmodule.exports = {\n  getRootThemesQuery,\n  getThemeQuery,\n};\n"],"names":["SOURCES","require","getRootThemesQuery","_source","query","bool","filter","term","source","THEMES","isPublished","must_not","exists","field","sort","position","order","getThemeQuery","slug","module","exports"],"mappings":"AAAA,MAAM,EAAEA,QAAO,EAAE,GAAGC,QAAQ;AAE5B,SAASC,qBAAqB;IAC5B,OAAO;QACLC,SAAS;YAAC;YAAQ;YAAY;YAAS;YAAQ;SAAW;QAC1DC,OAAO;YACLC,MAAM;gBACJC,QAAQ;oBACN;wBAAEC,MAAM;4BAAEC,QAAQR,QAAQS,MAAM;wBAAC;oBAAE;oBACnC;wBAAEF,MAAM;4BAAEG,aAAa,IAAI;wBAAC;oBAAE;iBAC/B;gBACDC,UAAU;oBAAEC,QAAQ;wBAAEC,OAAO;oBAAc;gBAAE;YAC/C;QACF;QACAC,MAAM;YAAC;gBAAEC,UAAU;oBAAEC,OAAO;gBAAM;YAAE;SAAE;IACxC;AACF;AAEA,SAASC,cAAc,EAAEC,KAAI,EAAE,EAAE;IAC/B,OAAO;QACLf,SAAS;YACP;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACDC,OAAO;YACLC,MAAM;gBACJC,QAAQ;oBACN;wBAAEC,MAAM;4BAAEW;wBAAK;oBAAE;oBACjB;wBAAEX,MAAM;4BAAEG,aAAa,IAAI;wBAAC;oBAAE;oBAC9B;wBAAEH,MAAM;4BAAEC,QAAQR,QAAQS,MAAM;wBAAC;oBAAE;iBACpC;YACH;QACF;QACAK,MAAM;YAAC;gBAAEC,UAAU;oBAAEC,OAAO;gBAAM;YAAE;SAAE;IACxC;AACF;AAEAG,OAAOC,OAAO,GAAG;IACflB;IACAe;AACF"}