{"version":3,"sources":["../../../src/routes/docs-count/index.js"],"sourcesContent":["import elasticsearchClient from \"../../conf/elasticsearch\";\nimport { API_BASE_URL, CDTN_ADMIN_VERSION } from \"../v1.prefix\";\n\nconst Router = require(\"koa-router\");\nconst { DOCUMENTS } = require(\"@socialgouv/cdtn-elasticsearch\");\n\nconst ES_INDEX_PREFIX = process.env.ES_INDEX_PREFIX || \"cdtn\";\nconst index = `${ES_INDEX_PREFIX}-${CDTN_ADMIN_VERSION}_${DOCUMENTS}`;\nconst docsCountBody = require(\"./docCount.elastic\");\n\nconst router = new Router({ prefix: API_BASE_URL });\n\n/**\n * Return document matching the given ID.\n *\n * @example\n * http://localhost:1337/api/v1/docsCount\n *\n * @param {string} :id The item ID to fetch.\n * @returns {Object} Result.\n */\nrouter.get(\"/docsCount\", async (ctx) => {\n  const {\n    body: { aggregations },\n  } = await elasticsearchClient.search({ body: docsCountBody, index });\n  ctx.body = { ...aggregations };\n});\n\nexport default router;\n"],"names":["elasticsearchClient","API_BASE_URL","CDTN_ADMIN_VERSION","Router","require","DOCUMENTS","ES_INDEX_PREFIX","process","env","index","docsCountBody","router","prefix","get","ctx","body","aggregations","search"],"mappings":"AAAA,OAAOA,yBAAyB,2BAA2B;AAC3D,SAASC,YAAY,EAAEC,kBAAkB,QAAQ,eAAe;AAEhE,MAAMC,SAASC,QAAQ;AACvB,MAAM,EAAEC,UAAS,EAAE,GAAGD,QAAQ;AAE9B,MAAME,kBAAkBC,QAAQC,GAAG,CAACF,eAAe,IAAI;AACvD,MAAMG,QAAQ,CAAC,EAAEH,gBAAgB,CAAC,EAAEJ,mBAAmB,CAAC,EAAEG,UAAU,CAAC;AACrE,MAAMK,gBAAgBN,QAAQ;AAE9B,MAAMO,SAAS,IAAIR,OAAO;IAAES,QAAQX;AAAa;AAEjD;;;;;;;;CAQC,GACDU,OAAOE,GAAG,CAAC,cAAc,OAAOC,MAAQ;IACtC,MAAM,EACJC,MAAM,EAAEC,aAAY,EAAE,CAAA,EACvB,GAAG,MAAMhB,oBAAoBiB,MAAM,CAAC;QAAEF,MAAML;QAAeD;IAAM;IAClEK,IAAIC,IAAI,GAAG;QAAE,GAAGC,YAAY;IAAC;AAC/B;AAEA,eAAeL,OAAO"}